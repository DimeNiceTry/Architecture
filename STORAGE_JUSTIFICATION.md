# Обоснование выбора типов хранилищ данных

В рамках проекта были использованы различные типы хранилищ данных для оптимальной работы с разными видами информации. Ниже приведено обоснование выбора каждого типа хранилища с учетом его характеристик и особенностей хранимых данных.

## 1. Redis (ключ-значение)

**Используется для:** Хранения списка студентов с ключом в виде номера зачетной книжки

**Обоснование выбора:**
- **Высокая скорость доступа:** Redis хранит данные в оперативной памяти, что обеспечивает очень быстрый доступ к информации о студентах по их уникальному идентификатору (номеру зачетки).
- **Простота модели данных:** Для хранения базовой информации о студентах достаточно простой модели ключ-значение, где значение представлено в виде JSON.
- **Атомарные операции:** Redis обеспечивает атомарность операций, что важно при одновременном обновлении данных о студентах.
- **Поддержка TTL:** При необходимости можно устанавливать время жизни для записей (например, для временных данных о сессии студента).

**Ограничения:**
- Отсутствие сложных запросов и связей между данными
- Ограниченные возможности для аналитики и агрегации данных

## 2. MongoDB (документ-композиция)

**Используется для:** Хранения документа с данными и составом группы

**Обоснование выбора:**
- **Гибкая схема данных:** MongoDB позволяет хранить документы с различной структурой, что удобно для хранения групп с разным составом и атрибутами.
- **Вложенные структуры:** Естественное представление группы с вложенным массивом студентов в одном документе.
- **Масштабируемость:** Легко масштабируется горизонтально при увеличении количества групп и студентов.
- **Богатый язык запросов:** Позволяет выполнять сложные запросы для анализа состава групп.

**Ограничения:**
- Менее строгая консистентность данных по сравнению с реляционными БД
- Ограниченные возможности для транзакций, охватывающих несколько документов

## 3. Neo4j (графовая база данных)

**Используется для:** Хранения связей между группой-студентом-курсом, с учетом курсов по выбору

**Обоснование выбора:**
- **Оптимизация для связей:** Neo4j специально разработан для эффективного хранения и обработки связей между сущностями.
- **Высокая производительность для графовых запросов:** Запросы на обход графа (например, "найти всех студентов, изучающих определенный курс по выбору") выполняются намного эффективнее, чем в реляционных или документных БД.
- **Наглядное представление данных:** Графовая модель наглядно отображает сложные взаимосвязи между студентами, группами и курсами.
- **Гибкость при изменении структуры связей:** Легко добавлять новые типы связей без изменения схемы.

**Ограничения:**
- Более сложное администрирование по сравнению с традиционными БД
- Не оптимален для хранения больших объемов однородных данных без сложных связей

## 4. ElasticSearch (полнотекстовый поиск)

**Используется для:** Хранения данных с полнотекстовым описанием курса

**Обоснование выбора:**
- **Мощный полнотекстовый поиск:** ElasticSearch оптимизирован для поиска по текстовому содержимому описаний курсов.
- **Поддержка русского языка:** Встроенные анализаторы для русского языка обеспечивают качественный поиск с учетом морфологии.
- **Ранжирование результатов:** Возможность ранжировать результаты поиска по релевантности.
- **Фасетный поиск:** Позволяет фильтровать курсы по различным атрибутам (кафедра, специализация и т.д.).
- **Масштабируемость:** Легко масштабируется при увеличении объема текстовых данных.

**Ограничения:**
- Не предназначен для транзакционной обработки данных
- Задержка при индексации (не подходит для данных, требующих немедленной видимости после изменения)

## 5. PostgreSQL (реляционная БД с партиционированием)

**Используется для:** Хранения данных о посещении лекций студентами с партиционированием по неделе посещения

**Обоснование выбора:**
- **ACID-транзакции:** Обеспечивает надежность и целостность данных о посещениях.
- **Партиционирование таблиц:** Разделение данных о посещениях по неделям позволяет оптимизировать производительность запросов, особенно для аналитики по конкретным периодам.
- **Мощный язык запросов SQL:** Позволяет выполнять сложные аналитические запросы для анализа посещаемости.
- **Поддержка внешних ключей:** Обеспечивает ссылочную целостность между таблицами студентов, лекций и посещений.
- **Оптимизация запросов:** Развитый оптимизатор запросов обеспечивает высокую производительность для сложных аналитических запросов.

**Ограничения:**
- Менее гибкая схема данных по сравнению с NoSQL-решениями
- Сложнее масштабировать горизонтально при очень больших объемах данных

## Общая архитектура хранения данных

Комбинирование различных типов хранилищ позволяет оптимально использовать их сильные стороны для разных видов данных и запросов:

1. **Redis** обеспечивает быстрый доступ к часто запрашиваемой информации о студентах по их ID.
2. **MongoDB** хранит документы с полной информацией о группах и их составе.
3. **Neo4j** оптимально управляет сложными связями между студентами, группами и курсами, особенно для курсов по выбору.
4. **ElasticSearch** обеспечивает полнотекстовый поиск по описаниям курсов.
5. **PostgreSQL** с партиционированием хранит транзакционные данные о посещениях для аналитики.

Такая полиглотная архитектура хранения данных позволяет достичь оптимальной производительности для различных типов запросов и операций, обеспечивая при этом масштабируемость и надежность системы в целом. 